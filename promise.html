<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>111</title>
</head>
<body>
<script>
	const test = {
		name:"lili",
		age:22
	}
	const {name,age} = test;
	console.log(name);
	const obj = ['lei',44,'address'];
	const [name1,name2] = obj;
	console.log(name2);
	// setTimeout(() => {
	// 	console.log('hello')
	// },1000)

	//参数->函数(resolve, reject)
	//resolve, reject本身也是函数
	//链式编程
	// new Promise((resolve, reject) => {
	// 	//第一次请求
	// 	setTimeout(res => {
	// 	resolve(res)
	// },1000)
	// }).then(res =>{
	// 	//第一次拿到结果的处理代码
	// 	console.log('hello world')
	// 	return new Promise((resolve, reject) =>{
	// 		//第二次请求
	// 		setTimeout(() => {
	// 			resolve()
	// 		},1000)
	// 	})
	// }).then(() => {
	// 	//第二次处理
	// 	console.log('Hello Js');
	// 	return new Promise((resolve, reject) => {
	// 		//第三次请求
	// 		setTimeout(() => {
	// 			//成功时候调用resolve
	// 			resolve();
	// 			//失败时候调用reject
	// 			reject('error');
	// 		},1000)
	// 	})
	// }).then(() => 
	// 	//第三次处理
	// 	console.log('Hello python')
	// ).catch(err =>
	// 	console.log(err)

	// )

//第二种写法catch作为then第二个参数
	// new Promise((resolve,reject) => {
	// 	setTimeout(() => {
	// 		//resolve('right');
	// 		reject('wrong');
	// 	},1000)
	// }).then(data =>{
	// 	console.log(data)
	// },err =>{
	// 	console.log(err)
	// })


//简写resolve
new Promise((resolve,reject) => {
	setTimeout(() => {
		resolve('aaa');
	},1000)
}).then((res) => {
	console.log(res,'第一次处理');
	return res + '111';//简写
}).then(res => {
	console.log(res,'第二次处理');
	return res + '222';
}).then(res => {
	console.log(res,'第三次处理');
})

//简写reject
new Promise((resolve,reject) => {
	setTimeout(() => {
		resolve('aaa');
	},1000)
}).then((res) => {
	console.log(res,'第一次处理');
	// return new Promise((resolve,reject) => {
	// 	reject('error')
	// })
	return Promise.reject('error');//简写
	//throw 'error message';
}).then(res => {
	console.log(res,'第二次处理');
	return res + '222';
}).then(res => {
	console.log('第三次处理');
}).catch(err => {
	console.log(err);
})
	//一般情况下对异步操作进行封装


	//需求：多个ajax返回后才进行下一步操作
	// Promise.all([
	// 		new Promise((resolve,reject) => {
	// 			$.ajax({
	// 				url:'',
	// 				success:function(data){
	// 					resolve(data)
	// 				}
	// 			})
	// 		}),
	// 		new Promise((resolve,reject) => {
	// 			$.ajax({
	// 				url:'',
	// 				success:data =>{
	// 					resolve(data)
	// 				}
	// 			})
	// 		})
	// 	]).then(results => {
	// 		console.log(results);//results会是一个数组
	// 	})



	// Promise.all([
	// 	new Promise((resolve,reject) => $.post("",{id:id},res => resolve(res))),
	// 	new Promise((resolve,reject) => $.post("",{id:id},res => resolve(res)))
	// ]).then(results => {
	// 	console.log(results);//results会是一个数组
	// })

	//模拟需求
	Promise.all([
		new Promise((resolve,reject) => setTimeout(() => resolve({name:'why',age:18}),1000)),
		new Promise((resolve,reject) => {
			setTimeout(() => {
				resolve({name:'kei',age:22})
			},2000)
		})
	]).then(results => {
		console.log(results);//results会是一个数组
	})
</script>
</body>
</html>